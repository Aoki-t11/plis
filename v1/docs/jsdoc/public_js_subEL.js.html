<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="generator" content="jsdoc v4.0.2">
    
    <title>
      
      public/js/subEL.js
      
    </title>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" media="screen" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" media="screen" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" media="screen" href="styles/clean-jsdoc-colorscheme.css">
    <link type="text/css" rel="stylesheet" media="screen" href="styles/clean-jsdoc-theme-light.css">

    

    

    

    

    
    

    <style>
      
      .sidebar-list-div {
          margin-top: 45px;
      }
    </style>

    

    

    
</head>
<body>
<svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>

<nav id="navbar" class="navbar">
    
    <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">README</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" aria-labelledby="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><div class="accordion collapsed" id="8396434" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id="2352416"><div class="accordion-heading child"><a href="module-main.html">main</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class="methods accordion-content"><li data-type="method"><a href="module-main.html#~createWindow">createWindow</a></li></ul></li><li class="accordion-list" id="7100150"><a href="module-mainArp.html">mainArp</a></li><li class="accordion-list" id="9673661"><a href="module-subEL.html">subEL</a></li></ul> </div></div>
</nav>

<div class="navbar-ham" id="navbar-ham">
  <div data-test="navbar-ham-clickable">
    <div class="first"></div>
    <div class="second"></div>
    <div class="third"></div>
  </div>
</div>

<div id="main" class="main-content">
    
    <h1 class="page-title">public/js/subEL.js</h1>
    
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//////////////////////////////////////////////////////////////////////
//	Copyright (C) SUGIMURA Lab. 2022.08.30
//	ECHONET Lite関係
//////////////////////////////////////////////////////////////////////
/**
 * @module subEL
 */
'use strict'


////////////////////////////////////////////////////////////////////////////////
// HTMLロードしたら準備
/**
 * Add two numbers together. (JSDoc test)
 * @param {number} a - The first number. (JSDoc test)
 * @param {number} b - The second number. (JSDoc test)
 * @returns {number} The sum of the two numbers. (JSDoc test)
 */
window.addEventListener('DOMContentLoaded', function () {
	console.log('## DOMContentLoaded subEL.js');

	let facilitiesEL;   // デバイスリスト EL

	// config tab
	let inELUse = document.getElementById('inELUse'); // check box; use or not
	let btnELConfigSet = document.getElementById('btnELConfigSet'); // 設定ボタン
	let ELSettingsContents = document.getElementById('ELSettingsContents');	// dialog

	// control tab
	let H2ControlEL = document.getElementById('H2ControlEL');
	let divControlEL = document.getElementById('divControlEL');
	let divDetails = document.getElementById('divDetails_content');	// details
	let divELSuggest = document.getElementById('divELSuggest');	// 使用していない時のサジェスト

	let toIP = document.getElementById('toIP');
	let eltestSEOJ = document.getElementById('eltestSEOJ');
	let eltestDEOJ = document.getElementById('eltestDEOJ');
	let eltestESV = document.getElementById('eltestESV');
	let eltestEPC = document.getElementById('eltestEPC');
	let eltestDETAILs = document.getElementById('eltestDETAILs');
	let elsend = document.getElementById('elsend');

	let multicastSearch = document.getElementById('multicastSearch');

	let txtELLog = document.getElementById('txtELLog');

	// サブメータのグラフ関連
	let facilitiesSubESM;  // サブメータのデータだけ
	let divSubESMH3 = document.getElementById('divSubESMH3');  // サブメータのH3タイトル
	divSubESMH3.style.display = 'none';  // 初期値非表示
	let divSubESM = document.getElementById('divSubESM');  // サブメータのセンサデータ
	divSubESM.style.display = 'none';  // 初期値非表示
	let canSubEnergyChart = document.getElementById('canSubEnergyChart'); // エネルギーチャート
	canSubEnergyChart.style.display = 'none';  // 初期値非表示

	let inUserAmpere = document.getElementById('inUserAmpere'); // 契約アンペア


	//----------------------------------------------------------------------------------------------
	// EL デバイス情報のrenew
	// mainからの情報で，EL関係のhtmlを変更する
	window.renewFacilitiesEL = function (arg) { //facilitiesHue = json = arg; // 機器情報確保
		txtELLog.value = JSON.stringify(arg, null, '  ');

		facilitiesEL = arg; // 機器情報確保

		if (!inELUse.checked) {  // 機能無効
			// console.log('-- inELUse.checked', inELUse.checked);
			return;
		}

		// 機能有効
		if (!facilitiesEL || isObjEmpty(facilitiesEL)) {  // 機器情報なし
			// console.log('-- facilitiesEL', facilitiesEL);
			doc = '&lt;div class="p">&lt;img src="./img/loadingRed.gif">接続中&lt;/div>';
			divControlEL.innerHTML = doc;
			return; // 機器情報なければやらない、存在も消す
		}

		let IPs = facilitiesEL.IPs;

		// -------------------------------------------------
		// controlタブ
		let doc = '';  // Controlのタブ内に書かれる文字
		IPs.forEach((ip) => {
			// console.log('-- IP', ip);

			let EOJs = facilitiesEL[ip].EOJs;
			EOJs.forEach((eoj) => {
				// console.log('-- IP', ip, 'EOJ', eoj);
				let obj = eoj.split(/\(|\)/);  // マルかっこで分割
				if (obj[1] === '0ef001') { return; } // Node Profileはコントローラとしては無視, eachではcontinueではなくreturn

				doc += "&lt;div class='LinearLayoutChild'> &lt;section>"
					+ `&lt;span id='ELSettingsButton' class='fa-solid fa-gear el-settings-btn' onclick='window.ELSettings("${ip}", "${eoj}");'> &lt;/span>`
					+ window.createControlELButton(facilitiesEL, ip, eoj)
					+ "&lt;/section> &lt;/div>";  // ボタン設置
			});
		});

		divControlEL.innerHTML = doc;


		// -------------------------------------------------
		// detailsタブ
		let detailDoc = "";  // Detailsのタブ内に書かれる文字
		IPs.forEach((ip) => {
			detailDoc += "&lt;h2>" + ip + "&lt;/h2>";
			detailDoc += "&lt;table border=0 class='el-details'>";

			let EOJs = facilitiesEL[ip].EOJs;
			EOJs.forEach((eoj) => {
				let obj = eoj.split(/\(|\)/);  // (と)で分割

				// icon
				detailDoc += "&lt;tr>&lt;td class='opc'>&lt;img src=\"./img/" + obj[1].substring(0, 2) + ".png\" width=50 />&lt;br />" + obj[0] + "&lt;/td>";
				detailDoc += '&lt;td class="edt">\n&lt;dl>';

				// EDT
				let EPCs = facilitiesEL[ip][eoj].EPCs;

				EPCs.forEach((epc) => {
					detailDoc += "&lt;dt>" + epc + "&lt;/dt>&lt;dd>" + facilitiesEL[ip][eoj][epc] + "&lt;/dd>\n";
				});
				detailDoc += '&lt;/dl>&lt;/td>&lt;/tr>';
			});
			detailDoc += "&lt;/table>";
		});
		divDetails.innerHTML = detailDoc;


		// もしサブメータがあれば
		for (let ip of IPs) {
			for (let eoj of facilitiesEL[ip].EOJs) {
				if (eoj == 'スマート電力量サブメータ01(028d01)') {
					window.renewSubESM(facilitiesEL[ip]);
				}
			}
		}
	}

	//----------------------------------------------------------------------------------------------
	// ECHONET Lite Config
	window.btnELConfigSet_Click = function () {
		console.log('window.btnELConfigSet_Click() inELUse:', inELUse.checked);
		btnELConfigSet.disabled = false;
		btnELConfigSet.textContent = '設定';

		if (inELUse.checked == false) {
			window.ipc.ELStop();  // ELをstopする
			facilitiesEL = {};
			divControlEL.innerHTML = '';
			return;
		}

		window.ipc.ELUse();
	};


	// 設定完了通知
	window.ELConfigSaved = function () {
		btnELConfigSet.disabled = false;
		btnELConfigSet.textContent = '設定';

		window.addToast('Info', 'EL 設定を保存しました。');
	};

	// mainプロセスから設定値をもらったので画面を更新
	window.renewELConfigView = function (arg) {
		inELUse.checked = arg.enabled;

		btnELConfigSet.disabled = false;
		btnELConfigSet.textContent = '設定';

		if (arg.enabled) {  // 利用する場合
			H2ControlEL.style.display = 'block';
			divControlEL.style.display = '-webkit-flex';
			divELSuggest.style.display = 'none';
		} else {  // 利用しない場合
			H2ControlEL.style.display = 'none';
			divControlEL.style.display = 'none';
			divELSuggest.style.display = 'block';
		}
	};



	//----------------------------------------------------------------------------------------------
	// ECHONET Lite Conntrol
	// マルチキャストボタン
	multicastSearch.addEventListener('click', function () {
		window.ipc.ELsearch();
	});


	//----------------------------------------------------------------------------------------------
	// サブメータ関連

	// R相、T相を数値に
	let convRT = function (str) {
		let n = str.split('[')[0];
		return parseFloat(n).toFixed(2);
	};


	window.renewSubESM = function (arg) {
		console.log('window.renewSubESM() arg:', arg);
		facilitiesSubESM = arg;

		if (Object.keys(facilitiesSubESM).length === 0) {  // 利用していない場合はSuggestを表示
			divSubESM.innerHTML = '';
			return;
		}

		// 利用している場合はタイトルと概要を表示
		divSubESMH3.style.display = 'block';
		divSubESM.style.display = 'block';

		let esmDoc = "&lt;div class='LinearLayoutParent'>";

		for (let eoj of arg.EOJs) {
			if (eoj == 'スマート電力量サブメータ01(028d01)') {
				let obj = arg[eoj];

				esmDoc += `&lt;section> &lt;div class='tooltip'>&lt;img src='./img/electric.png' class='esm-icon'/>&lt;div class='description'>設置場所: ${obj['設置場所(81)']} &amp;#013; &amp;#010; Version: ${obj['規格Version情報(82)']}&lt;/div>&lt;/div>&lt;br>`;

				esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='watt_color' id='subesmDocWattSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>瞬時電力&lt;/small>&lt;br>${arg.Means['瞬時電力計測値[W]']} W&lt;/section>&lt;/div>`;

				if (obj['瞬時電流計測値(E8)']) {
					let amp = JSON.parse(obj['瞬時電流計測値(E8)'].split('(')[0]);
					esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='ampereR_color' id='subesmDocAmpereRSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>瞬時電流R相&lt;/small>&lt;br>${convRT(amp.RPhase)} A&lt;/section>&lt;/div>`;
					esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='ampereT_color' id='subesmDocAmpereTSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>瞬時電流T相&lt;/small>&lt;br>${convRT(amp.TPhase)} A&lt;/section>&lt;/div>`;
				} else {
					esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='ampereR_color' id='subesmDocAmpereRSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>瞬時電流R相&lt;/small>&lt;br>取得中 A&lt;/section>&lt;/div>`;
					esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='ampereT_color' id='subesmDocAmpereTSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>瞬時電流T相&lt;/small>&lt;br>取得中 A&lt;/section>&lt;/div>`;
				}

				esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='comWattNorm_color' id='subesmDocComWattNormSec'>&lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>積算電力量（正）&lt;/small>&lt;br>`
					+ `${parseFloat(arg.Means['積算電力量計測値（正方向計測値）[kWh]']).toFixed(2)} kWh&lt;/section>&lt;/div>`;
				esmDoc += `&lt;div class='LinearLayoutChild_Env'> &lt;section class='comWattRev_color'  id='subesmDocComWattRevSec'> &lt;i class="fa-solid fa-bolt">&lt;/i> &lt;small>積算電力量（逆）&lt;/small>&lt;br>`
					+ `${parseFloat(arg.Means['積算電力量計測値（逆方向計測値）[kWh]']).toFixed(2)} kWh&lt;/section>&lt;/div>`;

				esmDoc += `&lt;/div>`;
			}
		}
		esmDoc += "&lt;/section>";

		esmDoc += "&lt;/div>"; // LinearLayoutParent
		divSubESM.innerHTML = esmDoc;
	};


	//----------------------------------------------------------------------------------------------
	// ESM chart

	// 内部変数、定時積算電力はグラフに表示しない
	let ocommulativeAmountNormal = [];
	let ocommulativeAmountReverse = [];
	let oinstantaneousCurrentsR = [];
	let oinstantaneousCurrentsT = [];
	let oinstantaneousPower = [];
	// let ocommulativeAmountsFixedTimeNormalPower = [];  // 定時必要無し
	// let ocommulativeAmountsFixedTimeRiversePower = [];

	/*
	const LABEL_X = [
		'00:00', '00:15', '00:30', '00:45', '01:00', '01:15', '01:30', '01:45', '02:00', '02:15', '02:30', '02:45',
		'03:00', '03:15', '03:30', '03:45', '04:00', '04:15', '04:30', '04:45', '05:00', '05:15', '05:30', '05:45',
		'06:00', '06:15', '06:30', '06:45', '07:00', '07:15', '07:30', '07:45', '08:00', '08:15', '08:30', '08:45',
		'09:00', '09:15', '09:30', '09:45', '10:00', '10:15', '10:30', '10:45', '11:00', '11:15', '11:30', '11:45',
		'12:00', '12:15', '12:30', '12:45', '13:00', '13:15', '13:30', '13:45', '14:00', '14:15', '14:30', '14:45',
		'15:00', '15:15', '15:30', '15:45', '16:00', '16:15', '16:30', '16:45', '17:00', '17:15', '17:30', '17:45',
		'18:00', '18:15', '18:30', '18:45', '19:00', '19:15', '19:30', '19:45', '20:00', '20:15', '20:30', '20:45',
		'21:00', '21:15', '21:30', '21:45', '22:00', '22:15', '22:30', '22:45', '23:00', '23:15', '23:30', '23:45', '24:00'];
*/
	// HTML内部とリンク
	const ctxSubESM = canSubEnergyChart.getContext('2d');
	let myChartSubESM = null;

	// 複数軸用の、軸オプション
	let complexChartOption = {
		responsive: true,
		plugins: {
			legend: {
				display: true,
				position: 'top'
			},
			autocolors: false,
			annotation: {
				annotations: {
					line1: {
						type: 'line',
						yScaleID: 'y-axis-right',
						yMin: 20,
						yMax: 20,
						borderColor: 'rgb(255, 99, 132)',
						borderWidth: 2,
						borderDash: [2, 3],
						label: {
							display: true,
							content: 'Breaker',
							position: 'end'
						}
					}
				}
			}
		},
		scales: {
			"y-axis-left-kwh": {
				type: "linear",   // linear固定
				position: "left", // どちら側に表示される軸か？
				// suggestedMax: 110,
				min: 0,
				title: { display: true, text: 'Commulative amounts energy [kWh]' }
			},
			"y-axis-left-w": {
				type: "linear",   // linear固定
				position: "left", // どちら側に表示される軸か？
				suggestedMax: 3000,
				min: 0,
				title: { display: true, text: 'Instantaneous electric power [W]' }
			},
			"y-axis-right": {
				type: "linear",
				position: "right",
				suggestedMax: 30,
				min: 0,
				title: { display: true, text: 'Ampere [A]' }
			},
			"x": {
				type: 'time',
				time: {
					unit: 'minutes',
					parser: 'HH:mm',
					displayFormats: {
						minute: 'HH:mm',
						hour: 'HH:mm'
					}
				},
				min: '00:00',
				max: '24:00',
				ticks: {
					autoSkip: false,
					maxTicksLimit: 49,   // 24h * 2 + 1
					maxRotation: 90,
					callback: function (value, index, ticks) {
						return moment.tz(value, 'Asia/Tokyo').format('HH:mm');
					}
				}
			}
		}
	};

	// 表示データ（動的）
	let datasetsSubESM = [];

	/**
 * Add two numbers together. (JSDoc test)
 * @param {number} a - The first number. (JSDoc test)
 * @param {number} b - The second number. (JSDoc test)
 * @returns {number} The sum of the two numbers. (JSDoc test)
 */
	let renewCanvasSubESM = function () {
		// タイトルとチャート表示
		divSubESMH3.style.display = 'block';
		divSubESM.style.display = 'block';
		canSubEnergyChart.style.display = 'block';

		let esmDoc = "&lt;div class='LinearLayoutParent'>";

		if (myChartSubESM) { myChartSubESM.destroy(); }  // chartがすでにctxを使っていると、リエントラントで"Canvas is already in use."のエラーが出る

		myChartSubESM = new Chart(ctxSubESM, {
			type: 'line',
			data: {
				// labels: LABEL_X,
				datasets: datasetsSubESM
			},
			options: complexChartOption
		});
	};


	//////////////////////////////////////////////////////////////////
	// データをもらって画面更新
	window.renewEnergySubmeter = function (_envDataArray) {
		// console.log('window.renewEnergySubmeter(); _envDataArray', _envDataArray);
		let envDataArray = JSON.parse(_envDataArray);

		if (inUserAmpere.value != '') {  // 契約アンペアの指定があればアノテーションする
			complexChartOption.plugins.annotation.annotations.line1.yMin = parseInt(inUserAmpere.value);
			complexChartOption.plugins.annotation.annotations.line1.yMax = parseInt(inUserAmpere.value);
			complexChartOption.scales["y-axis-right"].suggestedMax = parseInt(inUserAmpere.value) + 10;
		}

		datasetsSubESM = [];

		if (envDataArray) {
			ocommulativeAmountNormal = [];
			ocommulativeAmountReverse = [];
			oinstantaneousCurrentsR = [];
			oinstantaneousCurrentsT = [];
			oinstantaneousPower = [];
			// ocommulativeAmountsFixedTimeNormalPower = [];  // 定時必要無し
			// ocommulativeAmountsFixedTimeRiversePower = [];

			for (const d of envDataArray) {
				ocommulativeAmountNormal.push({ x: moment(d.time), y: d.commulativeAmountNormal });
				ocommulativeAmountReverse.push({ x: moment(d.time), y: d.commulativeAmountReverse });
				oinstantaneousCurrentsR.push({ x: moment(d.time), y: d.instantaneousCurrentsR });
				oinstantaneousCurrentsT.push({ x: moment(d.time), y: d.instantaneousCurrentsT });
				oinstantaneousPower.push({ x: moment(d.time), y: d.instantaneousPower });
				// 定時必要無し
				// ocommulativeAmountsFixedTimeNormalPower.push( d.commulativeAmountsFixedTimeNormalPower );
				// ocommulativeAmountsFixedTimeRiversePower.push( d.commulativeAmountsFixedTimeRiversePower );
			}

			datasetsSubESM.push(
				{
					label: '瞬時電力 [W]', type: 'line', data: oinstantaneousPower, borderColor: "rgba(178,255,178,1.0)", backgroundColor: "rgba(178,255,178,1.0)",
					radius: 1.5, borderWidth: 1, yAxisID: 'y-axis-left-w', borderDash: [2, 1]
				},
				{
					label: '瞬時電流R相 [A]', type: 'line', data: oinstantaneousCurrentsR, borderColor: "rgba(178,178,255,1.0)", backgroundColor: "rgba(178,178,255,1.0)",
					radius: 1.5, borderWidth: 1, yAxisID: 'y-axis-right', borderDash: [2, 1]
				},
				{
					label: '瞬時電流T相 [A]', type: 'line', data: oinstantaneousCurrentsT, borderColor: "rgba(255,196,137,1.0)", backgroundColor: "rgba(178,178,255,1.0)",
					radius: 1.5, borderWidth: 1, yAxisID: 'y-axis-right', borderDash: [2, 1]
				},
				{
					label: '積算電力量（正） [kWh]', type: 'line', fill: true, data: ocommulativeAmountNormal, borderColor: "rgba(255,178,178,1.0)", backgroundColor: "rgba(255,178,178,.2)",
					radius: 1.5, borderWidth: 1, yAxisID: 'y-axis-left-kwh', borderDash: [2, 1]
				},
				{
					label: '積算電力量（逆） [kWh]', type: 'line', fill: true, data: ocommulativeAmountReverse, borderColor: "rgba(255,178,255,1.0)", backgroundColor: "rgba(255,178,255,0.5)",
					radius: 1.5, borderWidth: 1, yAxisID: 'y-axis-left-kwh', borderDash: [2, 1]
				}
				// 定時無し
				// { label: '定時積算電力量（正） [kWh]',    type: 'line', data: ocommulativeAmountsFixedTimeNormalPower, borderColor: "rgba(178,255,178,1.0)", backgroundColor: "rgba(178,255,178,1.0)",
				// radius:1.5, borderWidth:1, yAxisID: 'y-axis-left', borderDash: [2,1] },
				// { label: '定時積算電力量（逆） [kWh]',    type: 'line', data: ocommulativeAmountsFixedTimeRiversePower, borderColor: "rgba(178,255,178,1.0)", backgroundColor: "rgba(178,255,178,1.0)",
				// radius:1.5, borderWidth:1, yAxisID: 'y-axis-left', borderDash: [2,1] }
			);

			renewCanvasSubESM();
		}
	};

});
</code></pre>
        </article>
    </section>





</div>

<footer id="footer" class="footer">
  
  Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on May 26, 2023 using the <a href="https://github.com/clean-jsdoc/clean-jsdoc-es5">clean-jsdoc</a> <span id="clean-jsdoc-theme">light</span> theme.
  
</footer>

<script src="scripts/third-party/prettify.min.js"></script>
<script src="scripts/third-party/lang-css.js"></script>
<script src="scripts/third-party/fuse.js"></script>
<script src="scripts/search.js" defer></script>
<script src="scripts/misc.js" defer></script>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js" defer></script>
<script src="scripts/fix-code-block.js" defer></script>
<script src="scripts/fix-navbar.js" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
      if (document.getElementById('search-box')) {
          var list = [{"title":"main","link":"<a href=\"module-main.html\">main</a>"},{"title":"module:main~createWindow","link":"<a href=\"module-main.html#~createWindow\">createWindow</a>"},{"title":"mainArp","link":"<a href=\"module-mainArp.html\">mainArp</a>"},{"title":"subEL","link":"<a href=\"module-subEL.html\">subEL</a>"}];
          setupSearch(list)
      }
})
</script>



<script>
    function replaceIcon() {
        var metaField = document.querySelector('.gh-meta')
        var iconField = document.querySelector('.gh-meta p ~ p')
        var icon = document.querySelector('.fa.fa-github')
        icon.style.fontSize = 'initial'
        icon.style.display = 'inline-block'
        icon.style.margin = '1rem 0'
        icon.style. padding = "0 .75em"
        icon.style.fontWeight = 700
        icon.innerText = 'Homepage'
        iconField.style.margin = '0'
    }

    var fa = document.createElement('link')
    fa.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'
    fa.rel = 'stylesheet'
    fa.type = 'text/css'
    fa.onerror = replaceIcon
    var style = document.getElementsByTagName('link')[0]
    style.parentNode.insertBefore(fa, style)
    // hide emoji markup when not publishing to GitHub
    var warnIcon = document.querySelector('.fa.fa-warning')
    if (warnIcon) warnIcon.innerText = ''
</script>
</body>
</html>
